---
title: C/C++ Note
date: 2017-08-17 16:32:41
tags: ["C/C++", "interview"]
categories: ["C/C++"]
description:
lang:
---

### 内存管理

首先，内存分为 * BBS段 数据段 代码段 堆 栈 *
其中代码段可以被共享，BBS和数据段都属于静态区，
<!-- more -->

堆 * Heap Tas * 由 `malloc / new `等函数分配。而频繁的 `new/delete` 势必会造成内存空间的不连续，从而造成大量的碎片，使程序效率降低。

栈 * Stack Pile * 则是用户创建的临时变量.而被函数调用的参数会被压入栈内，返回值也会存放到栈.对于堆来说，释放工作由程序员控制，容易产生memory leak。


参考资料:[BSS Block Started by Symbol segment](http://blog.csdn.net/zhjhj2007/article/details/12886747)

一般c语言的编译后执行语句都编译成机器代码，保存在.text段；已初始化的全局变量和局部静态变量都保存在. data段；未初始化的全局变量和局部静态变量一般放在一个叫`.bss`的段里。

未初始化的全局变量和局部静态变量默认值都为0，本来它们也可以被放在`.data`段的，但是因为它们都是0，所以为它们在.data段分配空间并且存放数据0是没有必要的。 程序运行的时候它们的确是要占内存空间的，并且可执行文件必须记录所有未初始化的全局变量和局部静态变量的大小总和，记为`.bss`段。 所以`.bss`段只是为未初始化的全局变量和局部静态变量预留位置而已，它并没有内容，所以它在文件中也不占据空间。

数据代码分离的好处：两个区读写权限不同，提高cpu cache的命中率，程序副本间共享代码段和只读数据。
